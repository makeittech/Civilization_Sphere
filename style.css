:root{--primary-50:#eff6ff;--primary-100:#dbeafe;--primary-200:#bfdbfe;--primary-300:#93c5fd;--primary-400:#60a5fa;--primary-500:#3b82f6;--primary-600:#2563eb;--primary-700:#1d4ed8;--primary-800:#1e40af;--primary-900:#1e3a8a;--surface-0:#ffffff;--surface-50:#f8fafc;--surface-100:#f1f5f9;--surface-200:#e2e8f0;--surface-300:#cbd5e1;--surface-400:#94a3b8;--surface-500:#64748b;--surface-600:#475569;--surface-700:#334155;--surface-800:#1e293b;--surface-900:#0f172a;--text-primary:#0f172a;--text-secondary:#475569;--text-tertiary:#94a3b8;--success:#10b981;--warning:#f59e0b;--error:#ef4444;--info:#3b82f6;--gradient-primary:linear-gradient(135deg,#667eea 0%,#764ba2 100%);--gradient-success:linear-gradient(135deg,#0ea5e9 0%,#10b981 100%);--gradient-warm:linear-gradient(135deg,#f59e0b 0%,#ef4444 100%);--gradient-cool:linear-gradient(135deg,#3b82f6 0%,#8b5cf6 100%);--gradient-subtle:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);--space-1:0.25rem;--space-2:0.5rem;--space-3:0.75rem;--space-4:1rem;--space-5:1.25rem;--space-6:1.5rem;--space-8:2rem;--space-10:2.5rem;--space-12:3rem;--space-16:4rem;--radius-sm:0.375rem;--radius-md:0.5rem;--radius-lg:0.75rem;--radius-xl:1rem;--radius-2xl:1.5rem;--radius-full:9999px;--shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);--shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1);--shadow-lg:0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -4px rgb(0 0 0 / 0.1);--shadow-xl:0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1);--shadow-2xl:0 25px 50px -12px rgb(0 0 0 / 0.25);--shadow-inner:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--glass-bg:rgba(255,255,255,0.7);--glass-border:rgba(255,255,255,0.3);--glass-blur:12px;--transition-fast:150ms cubic-bezier(0.4,0,0.2,1);--transition-base:300ms cubic-bezier(0.4,0,0.2,1);--transition-slow:500ms cubic-bezier(0.4,0,0.2,1);--z-base:1;--z-dropdown:1000;--z-sticky:1100;--z-fixed:1200;--z-modal-backdrop:1300;--z-modal:1400;--z-popover:1500;--z-tooltip:1600}body.dark-theme{--surface-0:#0f172a;--surface-50:#1e293b;--surface-100:#334155;--surface-200:#475569;--surface-300:#64748b;--surface-400:#94a3b8;--surface-500:#cbd5e1;--surface-600:#e2e8f0;--surface-700:#f1f5f9;--surface-800:#f8fafc;--surface-900:#ffffff;--text-primary:#f8fafc;--text-secondary:#cbd5e1;--text-tertiary:#64748b;--glass-bg:rgba(30,41,59,0.7);--glass-border:rgba(148,163,184,0.2)}*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;scroll-behavior:smooth;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;background:var(--surface-0);color:var(--text-primary);line-height:1.6;overflow-x:hidden;transition:background-color var(--transition-base),color var(--transition-base)}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--surface-100)}::-webkit-scrollbar-thumb{background:var(--surface-300);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--surface-400)}.skip-link{position:absolute;top:-100px;left:var(--space-4);background:var(--primary-600);color:white;padding:var(--space-2) var(--space-4);border-radius:var(--radius-md);text-decoration:none;font-weight:500;z-index:var(--z-tooltip);transition:top var(--transition-fast)}.skip-link:focus{top:var(--space-4)}.app-header{position:sticky;top:0;z-index:var(--z-sticky);background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border-bottom:1px solid var(--glass-border);box-shadow:var(--shadow-sm)}.header-container{max-width:1920px;margin:0 auto;padding:var(--space-4) var(--space-6);display:flex;justify-content:space-between;align-items:center;gap:var(--space-4)}.header-left{flex:1}.logo{display:flex;align-items:center;gap:var(--space-3)}.logo-icon{width:40px;height:40px;color:var(--primary-600);flex-shrink:0}.logo-text h1{font-size:1.5rem;font-weight:700;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2}.subtitle{font-size:0.875rem;color:var(--text-secondary);font-weight:500}.header-nav{display:flex;align-items:center;gap:var(--space-2)}.icon-btn{width:40px;height:40px;border:none;background:transparent;border-radius:var(--radius-md);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);position:relative}.icon-btn svg{width:20px;height:20px;color:var(--text-primary);transition:transform var(--transition-fast)}.icon-btn:hover{background:var(--surface-100)}.icon-btn:active svg{transform:scale(0.9)}.theme-icon{position:absolute;transition:opacity var(--transition-base),transform var(--transition-base)}body.light-theme .theme-icon.sun,body.dark-theme .theme-icon.moon{opacity:0;transform:rotate(180deg)}body.light-theme .theme-icon.moon,body.dark-theme .theme-icon.sun{opacity:1;transform:rotate(0deg)}.mobile-only{display:none}.app-main{display:grid;grid-template-columns:320px 1fr 360px;gap:var(--space-4);max-width:1920px;margin:0 auto;padding:var(--space-4) var(--space-6);height:calc(100vh - 80px);overflow:hidden}.sidebar{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-2xl);box-shadow:var(--shadow-lg);display:flex;flex-direction:column;overflow:hidden}.sidebar-header{padding:var(--space-5);border-bottom:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.sidebar-header h2{font-size:1.125rem;font-weight:600;color:var(--text-primary)}.close-btn{width:32px;height:32px;border:none;background:transparent;border-radius:var(--radius-md);cursor:pointer;display:none;align-items:center;justify-content:center;transition:all var(--transition-fast)}.close-btn svg{width:18px;height:18px;color:var(--text-secondary)}.close-btn:hover{background:var(--surface-100)}.sidebar-content{flex:1;overflow-y:auto;padding:var(--space-4);display:flex;flex-direction:column;gap:var(--space-6)}.filter-section{display:flex;flex-direction:column;gap:var(--space-3)}.section-title{font-size:0.875rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-secondary);display:flex;align-items:center;gap:var(--space-2)}.section-title .icon{width:16px;height:16px}.search-input{width:100%;padding:var(--space-3) var(--space-4);border:1px solid var(--surface-300);border-radius:var(--radius-lg);background:var(--surface-0);color:var(--text-primary);font-size:0.9375rem;transition:all var(--transition-fast)}.search-input:focus{outline:none;border-color:var(--primary-500);box-shadow:0 0 0 3px rgba(59,130,246,0.1)}.search-input::placeholder{color:var(--text-tertiary)}.quick-filters{display:grid;gap:var(--space-2)}.quick-filter{padding:var(--space-3) var(--space-4);border:1px solid var(--surface-300);border-radius:var(--radius-lg);background:var(--surface-0);color:var(--text-primary);font-size:0.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast);text-align:left}.quick-filter:hover{border-color:var(--primary-500);background:var(--primary-50)}.quick-filter.active{background:var(--gradient-primary);border-color:transparent;color:white;box-shadow:var(--shadow-md)}.filter-list{display:flex;flex-direction:column;gap:var(--space-1)}.filter-list.scrollable{max-height:200px;overflow-y:auto;padding-right:var(--space-2)}.filter-item{display:flex;align-items:center;gap:var(--space-2);padding:var(--space-2) var(--space-3);border-radius:var(--radius-md);cursor:pointer;transition:background-color var(--transition-fast)}.filter-item:hover{background:var(--surface-100)}.filter-item input[type="checkbox"]{width:18px;height:18px;accent-color:var(--primary-600);cursor:pointer}.filter-item label{flex:1;font-size:0.875rem;cursor:pointer;user-select:none}.date-range{display:flex;align-items:center;gap:var(--space-2)}.date-input{flex:1;padding:var(--space-2) var(--space-3);border:1px solid var(--surface-300);border-radius:var(--radius-md);background:var(--surface-0);color:var(--text-primary);font-size:0.875rem;transition:all var(--transition-fast)}.date-input:focus{outline:none;border-color:var(--primary-500)}.date-separator{color:var(--text-tertiary);font-weight:600}.export-buttons{display:grid;gap:var(--space-2)}.btn{padding:var(--space-3) var(--space-4);border:none;border-radius:var(--radius-lg);font-size:0.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;gap:var(--space-2)}.btn .icon{width:16px;height:16px}.btn-primary{background:var(--gradient-primary);color:white;box-shadow:var(--shadow-md)}.btn-primary:hover{box-shadow:var(--shadow-lg);transform:translateY(-2px)}.btn-secondary{background:var(--surface-100);color:var(--text-primary);border:1px solid var(--surface-300)}.btn-secondary:hover{background:var(--surface-200);border-color:var(--surface-400)}.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-3)}.stat-card{background:var(--gradient-subtle);border:1px solid var(--surface-200);border-radius:var(--radius-lg);padding:var(--space-4);text-align:center}.stat-value{font-size:2rem;font-weight:700;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1}.stat-label{font-size:0.75rem;color:var(--text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:0.05em;margin-top:var(--space-2)}.content-area{display:flex;flex-direction:column;gap:var(--space-4);overflow-y:auto}.map-container{position:relative;height:500px;background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-2xl);overflow:hidden;box-shadow:var(--shadow-xl)}.map{width:100%;height:100%}.leaflet-container{font-family:inherit}body.dark-theme .leaflet-tile-pane{filter:brightness(0.6) contrast(1.2) saturate(0.8)}.leaflet-popup-content-wrapper{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-xl)}.leaflet-popup-content{color:var(--text-primary);font-size:0.875rem}.leaflet-popup-tip{background:var(--glass-bg);border:1px solid var(--glass-border)}.map-controls{position:absolute;top:var(--space-4);right:var(--space-4);display:flex;flex-direction:column;gap:var(--space-2);z-index:var(--z-dropdown)}.map-btn{width:40px;height:40px;border:1px solid var(--glass-border);background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border-radius:var(--radius-lg);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);box-shadow:var(--shadow-md)}.map-btn svg{width:20px;height:20px;color:var(--text-primary)}.map-btn:hover{background:var(--primary-600);border-color:var(--primary-600);transform:scale(1.05)}.map-btn:hover svg{color:white}.custom-marker{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;box-shadow:var(--shadow-lg);border:3px solid white;transition:transform var(--transition-fast)}.custom-marker:hover{transform:scale(1.2)}.timeline-container{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-2xl);padding:var(--space-5);box-shadow:var(--shadow-lg)}.timeline-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-4)}.timeline-title{display:flex;align-items:center;gap:var(--space-2)}.timeline-title .icon{width:20px;height:20px;color:var(--primary-600)}.timeline-title h3{font-size:1rem;font-weight:600}.timeline-controls{display:flex;align-items:center;gap:var(--space-2)}.timeline-btn{width:36px;height:36px;border:1px solid var(--surface-300);background:var(--surface-0);border-radius:var(--radius-md);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.timeline-btn svg{width:16px;height:16px;color:var(--text-primary)}.timeline-btn:hover{background:var(--primary-600);border-color:var(--primary-600)}.timeline-btn:hover svg{color:white}.speed-selector select{padding:var(--space-2) var(--space-3);border:1px solid var(--surface-300);border-radius:var(--radius-md);background:var(--surface-0);color:var(--text-primary);font-size:0.875rem;font-weight:500;cursor:pointer}.speed-selector select:focus{outline:none;border-color:var(--primary-500)}.timeline-track{position:relative;height:8px;background:var(--surface-200);border-radius:var(--radius-full);cursor:pointer;margin-bottom:var(--space-3)}.timeline-progress{position:absolute;top:0;left:0;height:100%;background:var(--gradient-primary);border-radius:var(--radius-full);width:0%;transition:width var(--transition-fast)}.timeline-handle{position:absolute;top:50%;left:0%;transform:translate(-50%,-50%);width:20px;height:20px;background:white;border:3px solid var(--primary-600);border-radius:var(--radius-full);cursor:grab;box-shadow:var(--shadow-lg);transition:left var(--transition-fast)}.timeline-handle:active{cursor:grabbing}.timeline-info{display:flex;justify-content:center;align-items:center;gap:var(--space-2);font-size:0.875rem;color:var(--text-secondary);font-weight:500}.separator{color:var(--text-tertiary)}.analytics-container{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-2xl);padding:var(--space-5);box-shadow:var(--shadow-lg)}.analytics-header{margin-bottom:var(--space-5)}.analytics-header h3{font-size:1rem;font-weight:600;display:flex;align-items:center;gap:var(--space-2)}.analytics-header .icon{width:20px;height:20px;color:var(--primary-600)}.charts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--space-4)}.chart-card{background:var(--surface-0);border:1px solid var(--surface-200);border-radius:var(--radius-xl);padding:var(--space-4)}.chart-card h4{font-size:0.875rem;font-weight:600;color:var(--text-secondary);margin-bottom:var(--space-3);text-align:center}.chart-card canvas{max-height:220px}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:var(--space-12) var(--space-6);color:var(--text-tertiary)}.empty-icon{width:64px;height:64px;margin-bottom:var(--space-4);opacity:0.5}.event-content{display:flex;flex-direction:column;gap:var(--space-5)}.event-title{font-size:1.25rem;font-weight:700;line-height:1.4;color:var(--text-primary)}.event-meta{display:grid;gap:var(--space-3)}.meta-row{display:flex;flex-direction:column;gap:var(--space-1);padding:var(--space-3);background:var(--surface-50);border-radius:var(--radius-md)}.meta-label{font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-secondary)}.meta-value{font-size:0.9375rem;color:var(--text-primary);font-weight:500}.event-description{font-size:0.9375rem;line-height:1.7;color:var(--text-secondary)}.event-links{display:flex;flex-direction:column;gap:var(--space-2)}.event-link{display:flex;align-items:center;justify-content:center;gap:var(--space-2);padding:var(--space-3) var(--space-4);background:var(--gradient-primary);color:white;text-decoration:none;border-radius:var(--radius-lg);font-weight:500;font-size:0.875rem;transition:all var(--transition-fast);box-shadow:var(--shadow-md)}.event-link:hover{box-shadow:var(--shadow-lg);transform:translateY(-2px)}.event-link .icon{width:16px;height:16px}.modal{position:fixed;inset:0;z-index:var(--z-modal);display:flex;align-items:center;justify-content:center;padding:var(--space-4)}.modal-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);animation:fadeIn var(--transition-base)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.modal-content{position:relative;width:100%;max-width:600px;max-height:80vh;background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-2xl);box-shadow:var(--shadow-2xl);display:flex;flex-direction:column;animation:slideUp var(--transition-base)}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header{padding:var(--space-6);border-bottom:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center}.modal-header h2{font-size:1.5rem;font-weight:700}.modal-body{flex:1;overflow-y:auto;padding:var(--space-6)}.modal-body section{margin-bottom:var(--space-6)}.modal-body h3{font-size:1.125rem;font-weight:600;margin-bottom:var(--space-3);color:var(--text-primary)}.modal-body ul{list-style:none;display:flex;flex-direction:column;gap:var(--space-2)}.modal-body li{padding-left:var(--space-5);position:relative;font-size:0.9375rem;line-height:1.6;color:var(--text-secondary)}.modal-body li::before{content:'â†’';position:absolute;left:0;color:var(--primary-600);font-weight:700}.loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(8px);z-index:var(--z-modal);display:flex;align-items:center;justify-content:center}.loading-spinner{text-align:center;color:white}.spinner{width:48px;height:48px;border:4px solid rgba(255,255,255,0.2);border-top-color:white;border-radius:var(--radius-full);animation:spin 1s linear infinite;margin:0 auto var(--space-4)}@keyframes spin{to{transform:rotate(360deg)}}.toast-container{position:fixed;bottom:var(--space-6);right:var(--space-6);z-index:var(--z-tooltip);display:flex;flex-direction:column;gap:var(--space-2);max-width:400px}.toast{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:var(--radius-xl);padding:var(--space-4) var(--space-5);box-shadow:var(--shadow-xl);animation:slideInRight var(--transition-base);display:flex;align-items:center;gap:var(--space-3)}@keyframes slideInRight{from{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}.toast.success{border-left:4px solid var(--success)}.toast.error{border-left:4px solid var(--error)}.toast.warning{border-left:4px solid var(--warning)}.toast.info{border-left:4px solid var(--info)}@media (max-width:1280px){.app-main{grid-template-columns:300px 1fr 340px}}@media (max-width:1024px){.mobile-only{display:flex}.app-main{grid-template-columns:1fr;height:auto;min-height:calc(100vh - 80px)}.sidebar{position:fixed;top:0;bottom:0;z-index:var(--z-fixed);width:90%;max-width:400px;transform:translateX(-100%);transition:transform var(--transition-base);border-radius:0}.sidebar.active{transform:translateX(0)}.sidebar-left{left:0}.sidebar-right{right:0;left:auto;transform:translateX(100%)}.sidebar-right.active{transform:translateX(0)}.close-btn{display:flex}.map-container{height:400px}}@media (max-width:640px){.header-container{padding:var(--space-3) var(--space-4)}.logo-text h1{font-size:1.25rem}.subtitle{display:none}.app-main{padding:var(--space-3);gap:var(--space-3)}.sidebar{width:100%;max-width:none}.stats-grid{grid-template-columns:1fr}.charts-grid{grid-template-columns:1fr}.date-range{flex-direction:column}.date-input{width:100%}.toast-container{bottom:var(--space-4);right:var(--space-4);left:var(--space-4);max-width:none}}.hidden{display:none !important}.visible{display:block !important}