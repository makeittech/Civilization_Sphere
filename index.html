<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–æ–ø–æ–ª—ñ—Ç–∏—á–Ω—ñ –ü–æ–¥—ñ—ó - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Theme Toggle -->
    <div class="theme-toggle" id="themeToggle">
        <button class="theme-btn" data-theme="light">‚òÄÔ∏è</button>
        <button class="theme-btn active" data-theme="dark">üåô</button>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="app-container">
        <!-- Header with Search -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">–ì–µ–æ–ø–æ–ª—ñ—Ç–∏—á–Ω—ñ –ü–æ–¥—ñ—ó</h1>
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="–ü–æ—à—É–∫ –ø–æ–¥—ñ–π...">
                    <div id="searchSuggestions" class="search-suggestions"></div>
                </div>
                <div class="header-actions">
                    <button id="openDashboard" class="btn btn--secondary">üìä –î–∞—à–±–æ—Ä–¥</button>
                </div>
                <div class="header-stats">
                    <span id="totalEvents" class="stat-badge">–í—Å—å–æ–≥–æ –ø–æ–¥—ñ–π: 0</span>
                    <span id="filteredEvents" class="stat-badge">–í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–æ: 0</span>
                    <div class="playback-mode-indicator" id="playbackIndicator">
                        <span class="indicator-dot"></span>
                        <span>Live —Ä–µ–∂–∏–º</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Sidebar - Filters -->
            <aside class="sidebar left-sidebar" id="leftSidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">–§—ñ–ª—å—Ç—Ä–∏</h3>
                    
                    <!-- Quick Filters -->
                    <div class="quick-filters">
                        <button class="quick-filter-btn active" data-filter="all">–í—Å—ñ</button>
                        <button class="quick-filter-btn" data-filter="recent">–û—Å—Ç–∞–Ω–Ω—ñ</button>
                        <button class="quick-filter-btn" data-filter="conflicts">–ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏</button>
                        <button class="quick-filter-btn" data-filter="important">–í–∞–∂–ª–∏–≤—ñ</button>
                    </div>

                    <!-- Category Filters -->
                    <div class="filter-group">
                        <h4 class="filter-title">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ–¥—ñ–π</h4>
                        <div id="categoryFilters" class="checkbox-group"></div>
                    </div>

                    <!-- Date Range Filter -->
                    <div class="filter-group">
                        <h4 class="filter-title">–ü–µ—Ä—ñ–æ–¥</h4>
                        <div class="date-range">
                            <input type="date" id="dateFrom" class="form-control date-input">
                            <span class="date-separator">–¥–æ</span>
                            <input type="date" id="dateTo" class="form-control date-input">
                        </div>
                    </div>

                    <!-- Region Filter -->
                    <div class="filter-group">
                        <h4 class="filter-title">–†–µ–≥—ñ–æ–Ω–∏</h4>
                        <select id="regionFilter" class="form-control">
                            <option value="">–í—Å—ñ —Ä–µ–≥—ñ–æ–Ω–∏</option>
                        </select>
                    </div>

                    <button id="clearFilters" class="btn btn--secondary btn--full-width">–û—á–∏—Å—Ç–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
                </div>

                <!-- Statistics Panel -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-container">
                        <canvas id="categoryChart" class="chart-canvas"></canvas>
                        <canvas id="timelineChart" class="chart-canvas"></canvas>
                    </div>
                </div>
            </aside>

            <!-- Map Container -->
            <main class="map-container">
                <div id="map" class="map"></div>
                <div class="map-controls">
                    <div class="control-group">
                        <button id="resetView" class="btn btn--outline map-btn" title="–°–∫–∏–Ω—É—Ç–∏ –≤–∏–¥">
                            <span class="btn-icon">üè†</span>
                        </button>
                        <button id="fullscreen" class="btn btn--outline map-btn" title="–ü–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω">
                            <span class="btn-icon">‚õ∂</span>
                        </button>
                        <button id="layersToggle" class="btn btn--outline map-btn" title="–®–∞—Ä–∏">
                            <span class="btn-icon">üóÇ</span>
                        </button>
                    </div>
                    <div class="control-group">
                        <button id="heatmapToggle" class="btn btn--outline map-btn" title="–¢–µ–ø–ª–æ–≤–∞ –∫–∞—Ä—Ç–∞">
                            <span class="btn-icon">üî•</span>
                        </button>
                        <button id="connectionsToggle" class="btn btn--outline map-btn" title="–ó–≤'—è–∑–∫–∏">
                            <span class="btn-icon">üîó</span>
                        </button>
                        <button id="shareMap" class="btn btn--outline map-btn" title="–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è">
                            <span class="btn-icon">üì§</span>
                        </button>
                    </div>
                    <div class="control-group">
                        <button id="exportData" class="btn btn--outline map-btn" title="–ï–∫—Å–ø–æ—Ä—Ç">
                            <span class="btn-icon">üíæ</span>
                        </button>
                        <button id="exportGeoJSON" class="btn btn--outline map-btn" title="–ï–∫—Å–ø–æ—Ä—Ç GeoJSON">
                            <span class="btn-icon">üó∫Ô∏è</span>
                        </button>
                    </div>
                </div>

                <!-- Mobile Touch Controls -->
                <div class="mobile-touch-controls" id="mobileControls">
                    <div class="touch-gesture-hint">
                        <span>Pinch to zoom ‚Ä¢ Swipe to pan ‚Ä¢ Double tap to focus</span>
                    </div>
                </div>

                <!-- Map Loading Indicator -->
                <div class="map-loading" id="mapLoading">
                    <div class="loading-spinner"></div>
                    <span>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏...</span>
                </div>
            </main>

            <!-- Right Sidebar - Event Details -->
            <aside class="sidebar right-sidebar" id="rightSidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">–î–µ—Ç–∞–ª—ñ –ø–æ–¥—ñ—ó</h3>
                    <div id="eventDetails" class="event-details">
                        <div class="no-selection">
                            <p>–û–±–µ—Ä—ñ—Ç—å –ø–æ–¥—ñ—é –Ω–∞ –∫–∞—Ä—Ç—ñ –∞–±–æ –≤ —á–∞—Å–æ–≤—ñ–π —à–∫–∞–ª—ñ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª–µ–π</p>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Timeline -->
        <div class="timeline-container">
            <div class="timeline-header">
                <h3 class="timeline-title">–ß–∞—Å–æ–≤–∞ —à–∫–∞–ª–∞</h3>
                <div class="timeline-controls">
                    <div class="playback-controls">
                        <button id="timelinePlay" class="btn btn--sm timeline-btn" title="–í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏">
                            <span class="play-icon">‚ñ∂</span>
                        </button>
                        <button id="timelinePause" class="btn btn--sm timeline-btn" title="–ü–∞—É–∑–∞">
                            <span class="pause-icon">‚è∏</span>
                        </button>
                        <button id="timelineReset" class="btn btn--sm timeline-btn" title="–°–∫–∏–Ω—É—Ç–∏">
                            <span class="reset-icon">‚èπ</span>
                        </button>
                    </div>
                    <div class="speed-controls">
                        <label for="playbackSpeed" class="speed-label">–®–≤–∏–¥–∫—ñ—Å—Ç—å:</label>
                        <select id="playbackSpeed" class="speed-select">
                            <option value="0.5">0.5x</option>
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="5">5x</option>
                        </select>
                    </div>
                    <div class="timeline-progress">
                        <div class="progress-bar" id="timelineProgressBar">
                            <div class="progress-fill" id="timelineProgressFill"></div>
                            <div class="progress-handle" id="timelineProgressHandle"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="timeline-content">
                <div id="timeline" class="timeline"></div>
                <div class="timeline-scale" id="timelineScale"></div>
            </div>
        </div>
    </div>

    <!-- Dashboard Panel -->
    <div id="dashboardPanel" class="dashboard-panel hidden" aria-hidden="true">
        <div class="dashboard-header">
            <h2 class="dashboard-title">–†–µ—Å—É—Ä—Å–Ω–∏–π –î–∞—à–±–æ—Ä–¥</h2>
            <div class="dashboard-header-actions">
                <span id="currentUserBadge" class="status status--info">–ì—ñ—Å—Ç—å</span>
                <button id="closeDashboard" class="btn btn--outline">‚úñ</button>
            </div>
        </div>
        <div class="dashboard-tabs">
            <button class="dashboard-tab active" data-tab="manual">–†—É—á–Ω–µ –≤–≤–µ–¥–µ–Ω–Ω—è</button>
            <button class="dashboard-tab" data-tab="rss">–Ü–º–ø–æ—Ä—Ç RSS</button>
            <button class="dashboard-tab" data-tab="api">–Ü–º–ø–æ—Ä—Ç API</button>
            <button class="dashboard-tab" data-tab="categories">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</button>
            <button class="dashboard-tab" data-tab="review">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞</button>
            <button class="dashboard-tab" data-tab="users">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</button>
            <button class="dashboard-tab" data-tab="notifications">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
            <button class="dashboard-tab" data-tab="export">–ï–∫—Å–ø–æ—Ä—Ç</button>
        </div>
        <div class="dashboard-content">
            <!-- Manual Entry -->
            <section id="tab-manual" class="dashboard-section active">
                <form id="manualForm" class="card">
                    <div class="card__body">
                        <div class="form-group">
                            <label for="resTitle" class="form-label">–ù–∞–∑–≤–∞ —Ä–µ—Å—É—Ä—Å—É</label>
                            <input id="resTitle" type="text" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="resDate" class="form-label">–î–∞—Ç–∞</label>
                            <input id="resDate" type="date" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è</label>
                            <div class="flex gap-8">
                                <input id="resLat" type="number" step="0.000001" placeholder="–®–∏—Ä–æ—Ç–∞" class="form-control" required>
                                <input id="resLng" type="number" step="0.000001" placeholder="–î–æ–≤–≥–æ—Ç–∞" class="form-control" required>
                            </div>
                            <div class="mt-8">
                                <input id="resLocationName" type="text" placeholder="–õ–æ–∫–∞—Ü—ñ—è (–º—ñ—Å—Ç–æ/–∫—Ä–∞—ó–Ω–∞)" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="resCategory" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
                            <select id="resCategory" class="form-control" required></select>
                        </div>
                        <div class="form-group">
                            <label for="resTags" class="form-label">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)</label>
                            <input id="resTags" type="text" class="form-control" placeholder="–Ω–∞–ø—Ä. –ù–ê–¢–û, –†–æ—Å—ñ—è, –Ñ–°">
                        </div>
                        <div class="form-group">
                            <label for="resImportance" class="form-label">–í–∞–∂–ª–∏–≤—ñ—Å—Ç—å (1-10)</label>
                            <input id="resImportance" type="number" min="1" max="10" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="resSource" class="form-label">–î–∂–µ—Ä–µ–ª–æ (URL –∞–±–æ –Ω–∞–∑–≤–∞)</label>
                            <input id="resSource" type="text" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="resDescription" class="form-label">–û–ø–∏—Å</label>
                            <textarea id="resDescription" rows="4" class="form-control" required></textarea>
                        </div>
                        <div class="flex gap-8">
                            <button id="saveDraft" type="button" class="btn btn--secondary">–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ —á–µ—Ä–Ω–µ—Ç–∫—É</button>
                            <button id="submitForReview" type="submit" class="btn btn--primary">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É</button>
                        </div>
                        <div id="manualErrors" class="mt-8" style="color: var(--color-error);"></div>
                    </div>
                </form>
            </section>

            <!-- RSS Import -->
            <section id="tab-rss" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <div class="form-group">
                            <label for="rssUrl" class="form-label">RSS URL</label>
                            <input id="rssUrl" type="url" class="form-control" placeholder="https://example.com/feed.xml">
                        </div>
                        <div class="flex gap-8">
                            <button id="loadRSS" class="btn btn--primary">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
                            <label class="flex items-center gap-8"><input id="useCORSProxy" type="checkbox"> –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ CORS –ø—Ä–æ–∫—Å—ñ</label>
                        </div>
                        <div id="rssResults" class="mt-8"></div>
                    </div>
                </div>
            </section>

            <!-- API Import -->
            <section id="tab-api" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <div class="form-group">
                            <label for="apiUrl" class="form-label">API Endpoint (JSON)</label>
                            <input id="apiUrl" type="url" class="form-control" placeholder="https://api.example.com/events">
                        </div>
                        <div class="grid-2">
                            <div class="form-group"><label class="form-label">Title Path</label><input id="mapTitle" class="form-control" placeholder="items[].title"></div>
                            <div class="form-group"><label class="form-label">Date Path</label><input id="mapDate" class="form-control" placeholder="items[].date"></div>
                            <div class="form-group"><label class="form-label">Lat Path</label><input id="mapLat" class="form-control" placeholder="items[].lat"></div>
                            <div class="form-group"><label class="form-label">Lng Path</label><input id="mapLng" class="form-control" placeholder="items[].lng"></div>
                            <div class="form-group"><label class="form-label">Category Path</label><input id="mapCategory" class="form-control" placeholder="items[].category"></div>
                            <div class="form-group"><label class="form-label">Source Path</label><input id="mapSource" class="form-control" placeholder="items[].source"></div>
                            <div class="form-group"><label class="form-label">Importance Path</label><input id="mapImportance" class="form-control" placeholder="items[].importance"></div>
                            <div class="form-group"><label class="form-label">Description Path</label><input id="mapDescription" class="form-control" placeholder="items[].description"></div>
                        </div>
                        <div class="flex gap-8">
                            <button id="loadAPI" class="btn btn--primary">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
                        </div>
                        <div id="apiResults" class="mt-8"></div>
                    </div>
                </div>
            </section>

            <!-- Categories -->
            <section id="tab-categories" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <div id="categoryManager"></div>
                        <div class="form-group mt-8">
                            <label class="form-label">–î–æ–¥–∞—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</label>
                            <div class="flex gap-8">
                                <input id="newCategoryName" class="form-control" placeholder="–ù–∞–∑–≤–∞">
                                <input id="newCategoryColor" class="form-control" type="color" value="#32a8b8" style="max-width:100px;">
                                <button id="addCategory" class="btn btn--primary">–î–æ–¥–∞—Ç–∏</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Review Queue -->
            <section id="tab-review" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <div id="reviewList"></div>
                    </div>
                </div>
            </section>

            <!-- Users/Auth -->
            <section id="tab-users" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <form id="loginForm" class="flex gap-8">
                            <input id="loginUsername" class="form-control" placeholder="–õ–æ–≥—ñ–Ω">
                            <input id="loginPassword" type="password" class="form-control" placeholder="–ü–∞—Ä–æ–ª—å">
                            <button class="btn btn--primary" type="submit">–£–≤—ñ–π—Ç–∏</button>
                            <button id="logoutBtn" class="btn btn--secondary" type="button">–í–∏–π—Ç–∏</button>
                        </form>
                        <div class="mt-8" id="userInfo"></div>
                    </div>
                </div>
            </section>

            <!-- Notifications -->
            <section id="tab-notifications" class="dashboard-section">
                <div class="card">
                    <div class="card__body">
                        <label class="flex items-center gap-8">
                            <input id="enableDesktopNotifications" type="checkbox"> –£–≤—ñ–º–∫–Ω—É—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–∞ —Ä–æ–±–æ—á–æ–º—É —Å—Ç–æ–ª—ñ
                        </label>
                        <div id="notificationFeed" class="mt-8"></div>
                    </div>
                </div>
            </section>

            <!-- Export -->
            <section id="tab-export" class="dashboard-section">
                <div class="card">
                    <div class="card__body flex gap-8">
                        <button id="exportApprovedGeoJSON" class="btn btn--primary">–ï–∫—Å–ø–æ—Ä—Ç GeoJSON (–∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ)</button>
                        <button id="exportAllNDJSON" class="btn btn--outline">–ï–∫—Å–ø–æ—Ä—Ç NDJSON (–≤—Å—ñ)</button>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="dashboard.js"></script>
    <script src="app.js"></script>
</body>
</html>