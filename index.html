<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Civilization Sphere - —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –≥–µ–æ–ø–æ–ª—ñ—Ç–∏—á–Ω–∏—Ö –ø–æ–¥—ñ–π —É —á–∞—Å—ñ —Ç–∞ –ø—Ä–æ—Å—Ç–æ—Ä—ñ">
    <meta name="theme-color" content="#1a1a2e">
    <title>Civilization Sphere - –ì–µ–æ–ø–æ–ª—ñ—Ç–∏—á–Ω—ñ –ü–æ–¥—ñ—ó</title>
    
    <!-- Leaflet.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    <!-- Chart.js (implicit, loaded in JS) -->
    
    <!-- Main stylesheets -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É</a>
    
    <!-- Header Navigation -->
    <header class="app-header" role="banner">
        <div class="header-container">
            <div class="header-branding">
                <h1 class="app-title">
                    <span class="title-icon">üåç</span>
                    Civilization Sphere
                </h1>
                <p class="app-subtitle">–ì–µ–æ–ø–æ–ª—ñ—Ç–∏—á–Ω—ñ –ü–æ–¥—ñ—ó</p>
            </div>
            
            <nav class="header-nav" role="navigation" aria-label="–û—Å–Ω–æ–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è">
                <button class="nav-btn theme-toggle" id="theme-toggle" 
                        aria-label="–ü–µ—Ä–µ–º–∏–∫—É—Ç–∏ —Ç–µ–º–Ω—É/—Å–≤—ñ—Ç–ª—É —Ç–µ–º—É" title="–¢–µ–º–Ω–∞/–°–≤—ñ—Ç–ª–∞ —Ç–µ–º–∞">
                    <span class="theme-icon">üåô</span>
                </button>
                <button class="nav-btn help-btn" id="help-btn" 
                        aria-label="–î–æ–≤—ñ–¥–∫–∞" title="–î–æ–ø–æ–º–æ–≥–∞">
                    <span>?</span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="app-main" role="main">
        <!-- Left Sidebar - Controls Panel -->
        <aside class="control-panel" role="complementary" aria-label="–ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è">
            <div class="panel-header">
                <h2>–ö–µ—Ä—É–≤–∞–Ω–Ω—è</h2>
                <button class="panel-close-btn" id="panel-close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å">
                    <span>‚úï</span>
                </button>
            </div>

            <div class="panel-content">
                <!-- Search Section -->
                <section class="search-section" aria-label="–ü–æ—à—É–∫ –ø–æ–¥—ñ–π">
                    <h3>üîç –ü–æ—à—É–∫</h3>
                    <input type="text" id="search-input" class="search-input" 
                           placeholder="–ü–æ—à—É–∫ –ø–æ–¥—ñ–π..." aria-label="–ü–æ—à—É–∫ –ø–æ–¥—ñ–π">
                </section>

                <!-- Quick Filters Section -->
                <section class="filters-section" aria-label="–®–≤–∏–¥–∫—ñ —Ñ—ñ–ª—å—Ç—Ä–∏">
                    <h3>‚ö° –®–≤–∏–¥–∫—ñ —Ñ—ñ–ª—å—Ç—Ä–∏</h3>
                    <div class="quick-filters">
                        <button class="quick-filter-btn active" data-filter="all" aria-pressed="true">
                            –í—Å—ñ eventos
                        </button>
                        <button class="quick-filter-btn" data-filter="recent" aria-pressed="false">
                            –û—Å—Ç–∞–Ω–Ω—ñ (7 –¥–Ω—ñ–≤)
                        </button>
                        <button class="quick-filter-btn" data-filter="important" aria-pressed="false">
                            –í–∞–∂–ª–∏–≤—ñ
                        </button>
                        <button class="quick-filter-btn" data-filter="conflicts" aria-pressed="false">
                            –ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏
                        </button>
                    </div>
                </section>

                <!-- Categories Filter -->
                <section class="categories-section" aria-label="–§—ñ–ª—å—Ç—Ä –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏">
                    <h3>üìÇ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h3>
                    <div class="categories-list" id="categories-container"></div>
                </section>

                <!-- Regions Filter -->
                <section class="regions-section" aria-label="–§—ñ–ª—å—Ç—Ä –∑–∞ —Ä–µ–≥—ñ–æ–Ω–∞–º–∏">
                    <h3>üó∫Ô∏è –†–µ–≥—ñ–æ–Ω–∏</h3>
                    <div class="regions-list" id="regions-container"></div>
                </section>

                <!-- Channels Filter -->
                <section class="channels-section" aria-label="–§—ñ–ª—å—Ç—Ä –∑–∞ –∫–∞–Ω–∞–ª–∞–º–∏">
                    <h3>üì∫ –ö–∞–Ω–∞–ª–∏</h3>
                    <div class="channels-list" id="channels-container"></div>
                </section>

                <!-- Date Range Filter -->
                <section class="date-section" aria-label="–§—ñ–ª—å—Ç—Ä –∑–∞ –¥–∞—Ç–æ—é">
                    <h3>üìÖ –ü–µ—Ä—ñ–æ–¥</h3>
                    <div class="date-inputs">
                        <input type="date" id="date-from" class="date-input" aria-label="–î–∞—Ç–∞ –≤—ñ–¥">
                        <span class="date-separator">‚Äì</span>
                        <input type="date" id="date-to" class="date-input" aria-label="–î–∞—Ç–∞ –¥–æ">
                    </div>
                </section>

                <!-- Data Controls -->
                <section class="data-section" aria-label="–ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏–º–∏">
                    <h3>üíæ –î–∞–Ω—ñ</h3>
                    <button class="action-btn" id="export-csv-btn" aria-label="–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —É CSV">
                        <span>üì• –ï–∫—Å–ø–æ—Ä—Ç CSV</span>
                    </button>
                    <button class="action-btn" id="export-json-btn" aria-label="–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —É JSON">
                        <span>üì• –ï–∫—Å–ø–æ—Ä—Ç JSON</span>
                    </button>
                </section>

                <!-- Statistics -->
                <section class="stats-section" aria-label="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-display">
                        <div class="stat-item">
                            <span class="stat-label">–ü–æ–¥—ñ–π:</span>
                            <span class="stat-value" id="total-events">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–í–∏–¥–∏–º–∏—Ö:</span>
                            <span class="stat-value" id="visible-events">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–†–µ–≥—ñ–æ–Ω—ñ–≤:</span>
                            <span class="stat-value" id="region-count">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ö–∞–Ω–∞–ª—ñ–≤:</span>
                            <span class="stat-value" id="channel-count">0</span>
                        </div>
                    </div>
                </section>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Map Container -->
            <section class="map-section" aria-label="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞">
                <div id="map" class="map-container" role="application" aria-label="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –ø–æ–¥—ñ–π"></div>
                
                <!-- Map Controls Overlay -->
                <div class="map-controls">
                    <button class="map-control-btn" id="zoom-in-btn" aria-label="–ó–±—ñ–ª—å—à–∏—Ç–∏ –º–∞—Å—à—Ç–∞–±">
                        <span>+</span>
                    </button>
                    <button class="map-control-btn" id="zoom-out-btn" aria-label="–ó–º–µ–Ω—à–∏—Ç–∏ –º–∞—Å—à—Ç–∞–±">
                        <span>‚àí</span>
                    </button>
                    <button class="map-control-btn" id="reset-view-btn" aria-label="–°–∫–∏–Ω—É—Ç–∏ –≤–∏–¥">
                        <span>üéØ</span>
                    </button>
                </div>
            </section>

            <!-- Timeline Section -->
            <section class="timeline-section" aria-label="–ß–∞—Å–æ–≤–∞ —à–∫–∞–ª–∞ –ø–æ–¥—ñ–π">
                <div class="timeline-header">
                    <h3>‚è∞ –ß–∞—Å–æ–≤–∞ —à–∫–∞–ª–∞</h3>
                    <div class="timeline-controls">
                        <button class="timeline-btn play-btn" id="play-btn" aria-label="–í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏">
                            <span>‚ñ∂</span>
                        </button>
                        <button class="timeline-btn pause-btn" id="pause-btn" aria-label="–ü–∞—É–∑–∞" style="display: none;">
                            <span>‚è∏</span>
                        </button>
                        <button class="timeline-btn reset-btn" id="reset-timeline-btn" aria-label="–°–∫–∏–Ω—É—Ç–∏">
                            <span>‚Üª</span>
                        </button>
                    </div>
                </div>

                <div class="timeline-content">
                    <div class="timeline-progress" id="timeline-progress"></div>
                    <div class="timeline-slider" id="timeline-slider" role="slider" 
                         aria-label="–ü—Ä–æ–≥—Ä–µ—Å —á–∞—Å–æ–≤–æ—ó —à–∫–∞–ª–∏" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                </div>

                <div class="timeline-controls-extended">
                    <label class="speed-control">
                        <span>–®–≤–∏–¥–∫—ñ—Å—Ç—å:</span>
                        <select id="speed-select" aria-label="–í–∏–±—ñ—Ä —à–≤–∏–¥–∫–æ—Å—Ç—ñ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è">
                            <option value="0.5">0.5x</option>
                            <option value="1" selected>1x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2x</option>
                            <option value="3">3x</option>
                            <option value="5">5x</option>
                        </select>
                    </label>
                    <div class="timeline-info">
                        <span id="current-date">--</span>
                        <span class="info-separator">/</span>
                        <span id="total-date">--</span>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section class="analytics-section" aria-label="–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –¥—ñ–∞–≥—Ä–∞–º–∏">
                <div class="analytics-header">
                    <h3>üìà –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</h3>
                </div>

                <div class="analytics-grid">
                    <div class="chart-container">
                        <h4>–†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏</h4>
                        <canvas id="categories-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>–†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ —Ä–µ–≥—ñ–æ–Ω–∞–º–∏</h4>
                        <canvas id="regions-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>–ü–æ–¥—ñ—ó –∑–∞ —á–∞—Å–æ–º</h4>
                        <canvas id="timeline-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>–í–∞–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–¥—ñ–π</h4>
                        <canvas id="importance-chart"></canvas>
                    </div>
                </div>
            </section>
        </div>

        <!-- Right Sidebar - Event Details -->
        <aside class="event-panel" role="complementary" aria-label="–î–µ—Ç–∞–ª—ñ –≤–∏–±—Ä–∞–Ω–æ—ó –ø–æ–¥—ñ—ó">
            <div class="panel-header">
                <h2>–î–µ—Ç–∞–ª—ñ</h2>
                <button class="panel-close-btn" id="event-panel-close" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å">
                    <span>‚úï</span>
                </button>
            </div>

            <div class="panel-content" id="event-details">
                <p class="placeholder-text">–í–∏–±–µ—Ä—ñ—Ç—å –ø–æ–¥—ñ—é –Ω–∞ –∫–∞—Ä—Ç—ñ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª–µ–π</p>
            </div>
        </aside>
    </main>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="–ú–µ–Ω—é" style="display: none;">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner" style="display: none;" aria-live="polite">
        <div class="spinner"></div>
        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p>
    </div>

    <!-- Notification Toast -->
    <div class="notification-toast" id="notification-toast" aria-live="assertive" aria-atomic="true"></div>

    <!-- Help Modal -->
    <div class="modal" id="help-modal" style="display: none;" role="dialog" aria-labelledby="help-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="help-title">–î–æ–≤—ñ–¥–∫–∞ —Ç–∞ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó</h2>
                <button class="modal-close" id="help-modal-close" aria-label="–ó–∞–∫—Ä–∏—Ç–∏"></button>
            </div>
            <div class="modal-body">
                <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞—Ä—Ç–æ—é</h3>
                <ul>
                    <li><strong>–ö–ª—ñ–∫/–¢–∞–ø</strong> –Ω–∞ –º–∞—Ä–∫–µ—Ä - –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ–¥—ñ—é</li>
                    <li><strong>–ü—Ä–æ–∫—Ä—É—Ç–∫–∞</strong> - –∑–±—ñ–ª—å—à–µ–Ω–Ω—è/–∑–º–µ–Ω—à–µ–Ω–Ω—è</li>
                    <li><strong>–ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è</strong> - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –∫–∞—Ä—Ç—ñ</li>
                    <li><strong>–ú–æ–±—ñ–ª—å–Ω—ñ –∂–µ—Å—Ç–∏</strong> - –ø—ñ–Ω—á –¥–ª—è –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è</li>
                </ul>

                <h3>–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è</h3>
                <ul>
                    <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ <strong>–®–≤–∏–¥–∫—ñ —Ñ—ñ–ª—å—Ç—Ä–∏</strong> –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤</li>
                    <li>–í–∏–±–∏—Ä–∞–π—Ç–µ <strong>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</strong> —Ç–∞ <strong>–†–µ–≥—ñ–æ–Ω–∏</strong></li>
                    <li>–í—Å—Ç–∞–Ω–æ–≤–ª—é–π—Ç–µ <strong>–ü–µ—Ä—ñ–æ–¥ –¥–∞—Ç</strong> –¥–ª—è —á–∞—Å–æ–≤–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É</li>
                    <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ <strong>–ü–æ—à—É–∫</strong> –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–æ–¥—ñ–π</li>
                </ul>

                <h3>–ß–∞—Å–æ–≤–∞ —à–∫–∞–ª–∞</h3>
                <ul>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <strong>‚ñ∂ –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏</strong> –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–æ–¥—ñ–π</li>
                    <li>–ù–∞–ª–∞—à—Ç—É–π—Ç–µ <strong>–®–≤–∏–¥–∫—ñ—Å—Ç—å</strong> –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è</li>
                    <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ <strong>–ü–æ–ª–∑—É–Ω–æ–∫</strong> –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó</li>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <strong>‚è∏ –ü–∞—É–∑–∞</strong> –¥–ª—è –∑—É–ø–∏–Ω–∫–∏</li>
                </ul>

                <h3>–ï–∫—Å–ø–æ—Ä—Ç</h3>
                <ul>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <strong>–ï–∫—Å–ø–æ—Ä—Ç CSV</strong> –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</li>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <strong>–ï–∫—Å–ø–æ—Ä—Ç JSON</strong> –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö</li>
                </ul>

                <h3>–¢–µ–º–∞</h3>
                <ul>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É <strong>üåô</strong> —É –≤–µ—Ä—Ö–Ω—å–æ–º—É –ø—Ä–∞–≤–æ–º—É –∫—É—Ç–∫—É –¥–ª—è –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ç–µ–º–∏</li>
                    <li>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="app.js" defer></script>
</body>
</html>
